/* 修复1: 移除不存在的 .menus_item_child 选择器 */
#nav .menus_items .menus_item a.site-page {
  padding: 10px 15px; /* 修复：添加基础内边距 */
  display: inline-flex;
  align-items: center;
  gap: 8px; /* 图标和文字之间的间距 */
  color: #333;
  text-decoration: none;
  transition: all 0.3s ease;
}

/* 修复2: 添加悬停效果 */
#nav .menus_items .menus_item a.site-page:hover {
  color: #007bff;
  background-color: rgba(0, 123, 255, 0.1);
  border-radius: 8px;
}

/* 修复3: 修复图标样式 */
#nav .menus_items .menus_item a.site-page i {
  font-size: 1.1em;
  color: #4c4948;
}

/* 修复4: 修复移动端菜单 */
@media (max-width: 870px) {
  #nav .menus_items {
    display: none; /* 移动端默认隐藏 */
  }
  #nav.show .menus_items {
    display: block; /* 点击后显示 */
  }
}

/* 修复5: 修复导航栏居中 */
#nav-right {
  flex: 1;
  justify-content: flex-end;
  margin-left: auto;
  display: flex;
  flex-wrap: nowrap;
}

/* 修复6: 修复标题按钮 */
#nav #page-name {
  padding: 10px 30px;
  position: relative;
}

/* 强制.not-top-img状态下的导航栏始终固定并显示 */
#page-header.not-top-img #nav {
  position: fixed !important;
  top: 0 !important;
  opacity: 1 !important;
  visibility: visible !important;
  transform: none !important;
}

/* 特别处理滚动为0时的情况 */
#page-header.not-top-img:not(.nav-fixed) #nav {
  position: fixed !important;
  top: 0 !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* 防止导航栏被隐藏 */
#page-header.not-top-img.nav-fixed #nav,
#page-header.not-top-img:not(.nav-fixed) #nav {
  position: fixed !important;
  top: 0 !important;
}

/* 如果有需要，添加padding-top防止内容被导航栏遮挡 */
#page-header.not-top-img + .layout {
  padding-top: 60px !important;
}


/* 禁用页面头部的动画 */
#page-header {
  animation: none !important;
}

/* 特别针对没有顶部图片的情况 */
#page-header.not-top-img {
  animation: none !important;
}

/* 确保在页面加载的各个阶段都没有动画 */
#page-header.nav-fixed,
#page-header.nav-visible,
#page-header.nav-fixed.fixed {
  animation: none !important;
}


/* 导航栏背景透明过渡效果 */
#page-header.not-top-img #nav {
  /* 初始状态：完全透明 */
  background: rgba(255, 255, 255, 0) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  box-shadow: none !important;
  
  /* 平滑过渡 */
  transition: background 0.4s ease,
              backdrop-filter 0.4s ease,
              box-shadow 0.4s ease !important;
}

/* 当滚动时（通过JS动态添加类） */
#page-header.not-top-img.nav-fixed #nav {
  /* 最终状态：白色半透明 */
  background: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08) !important;
}

/* 文字颜色也需要过渡 */
#page-header.not-top-img #nav a,
#page-header.not-top-img #nav span.site-page {
  color: var(--font-color) !important;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3) !important;
  transition: color 0.4s ease, text-shadow 0.4s ease !important;
}

#page-header.not-top-img.nav-fixed #nav a,
#page-header.not-top-img.nav-fixed #nav span.site-page {
  text-shadow: none !important;
}